<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>webpack-minimal</title>
    <link rel="shortcut icon" type="image/png" href="../assets/favicon-16x16.png"/>
    <!-- <link rel="stylesheet" href="./src/index.css"/>
         <link rel="stylesheet" href="./src/theme.css"/> -->
    <link href="https://unpkg.com/ionicons@4.5.5/dist/css/ionicons.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
    <style>
          html, body {
         width: 100%;
         height: 100%;
         padding: 0px;
         margin: 0px;

     }

     body {
         font-family: 'Roboto', sans-serif;
         background: black;
     }

     section {
         width: 100%;
         height: 100%;
         background: #202020;
     }

     #controls {
         text-align: center;
     }

     .pg-wrap {
         margin: auto;
         width: 90%;
         height: 0;
         padding-bottom: 60%;
     }
    </style>
</head>
<body>
<section>
  <div id="app"></div>

  <div id="controls">
    <button id="deal">Deal</button>
    <button id="check">Check</button>
    <button id="call">Call</button>
    <button id="raise">Raise</button>
    <button id="allin">AllIn</button>
    <button id="fold">Fold</button>
  </div>
</section>

<script>

const promiseSerial = funcs =>
  funcs.reduce((promise, func) =>
    promise.then(result => func().then(Array.prototype.concat.bind(result))),
    Promise.resolve([]))

 const api = init();

 function init() {
 
   const handlers = {
     move(o) {
     }
   };

   var config = {
     round: 'preflop',
     deal: {
       blinds: 100,
       button: 0,
       smallBlind: 1,
       bigBlind: 4,
       firstToAct: 0
     },
     currency: '$',
     pov: {
       seats: [{img: 'https://i.pravatar.cc/300', stack: 10000},
               { img: 'https://i.pravatar.cc/300', stack: 900 },
               null,
               null, 
               { img: 'https://i.pravatar.cc/300', stack: 120399}]
     },
     events: {
     }
   };

   //const server = new Pokerground.Server();
   //const socket = new Pokerground.Socket(handlers);

   const api = Pokerground(document.getElementById('app'), config);

   return api;
 }

 onClick(document.getElementById("deal"), function() {
   var o = {
     blinds: 100,
     button: 0,
     smallBlind: 1,
     bigBlind: 2,
     firstToAct: 3
   };
   api.deal(o);
 });

 onClick(document.getElementById("raise"), () => api.raise(10000));

 onClick(document.getElementById("call"), () => api.call(1000));

 onClick(document.getElementById("allin"), () => api.allin(10000));

 onClick(document.getElementById("check"), () => api.check());

 onClick(document.getElementById("fold"), () => api.fold());

 function onClick(button, f) {
   button.addEventListener('click', f);
 }
 
</script>

</body>
</html>
